<!doctype html>
<html lang="en">
  <head>
    <script type="module">
      import { Buffer } from 'buffer'
      import process from 'process'
      window.Buffer = Buffer
      window.process = process
      // Add process.binding polyfill for end-of-stream module
      if (!process.binding) {
        process.binding = () => ({})
      }
    </script>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>XRPL Connect - Demo</title>
  </head>
  <body>
    <div id="app">
      <header>
        <div class="header-content">
          <h1>üîó XRPL Connect Demo</h1>
          <p>Framework-agnostic wallet connection toolkit for XRPL</p>
        </div>
      </header>

      <main>
        <!-- Theme Customization Section -->
        <section id="theme-section">
          <h2>Component Theming</h2>
          <p class="section-description">Customize the wallet connector component theme in real-time</p>
          <div class="theme-buttons">
            <button class="theme-btn theme-btn-active" data-theme="dark">
              üåô Dark Theme
            </button>
            <button class="theme-btn" data-theme="light">
              ‚òÄÔ∏è Light Theme
            </button>
            <button class="theme-btn" data-theme="purple">
              üü£ Purple Theme
            </button>
          </div>
          <div class="theme-info">
            <p><strong>Current Theme:</strong> <span id="current-theme">Dark</span></p>
            <p class="theme-description">CSS variables are applied dynamically to the <code>&lt;xrpl-wallet-connector&gt;</code> component. Try switching themes while the modal is open!</p>
          </div>
        </section>

        <!-- Connection Status Section -->
        <section id="connect-section">
          <h2>Connection Status</h2>
          <p class="section-description">Click the <strong>"Connect Wallet"</strong> button above to connect or manage your wallet</p>
          <div id="status" class="status"></div>
        </section>

        <!-- Account Info Section -->
        <section id="account-section" style="display: none;">
          <h2>Account Info</h2>
          <div class="info-card">
            <div class="info-row">
              <span class="label">Address:</span>
              <span id="address" class="value"></span>
            </div>
            <div class="info-row">
              <span class="label">Network:</span>
              <span id="network" class="value"></span>
            </div>
            <div class="info-row">
              <span class="label">Wallet:</span>
              <span id="wallet-name" class="value"></span>
            </div>
          </div>
          <p class="section-description">Click the button showing your address to disconnect</p>
        </section>

        <!-- Transaction Section -->
        <section id="transaction-section" style="display: none;">
          <h2>Send Transaction</h2>
          <form id="tx-form" class="tx-form">
            <div class="form-group">
              <label for="destination">Destination Address</label>
              <input
                type="text"
                id="destination"
                placeholder="rN7n7otQDd6FczFgLdlqtyMVrn3HMfXoQT"
                required
              />
            </div>
            <div class="form-group">
              <label for="amount">Amount (drops)</label>
              <input
                type="number"
                id="amount"
                placeholder="1000000"
                min="1"
                required
              />
              <small>1 XRP = 1,000,000 drops</small>
            </div>
            <button type="submit" class="btn-primary">Sign & Submit Transaction</button>
          </form>
          <div id="tx-result" class="result"></div>
        </section>

        <!-- Sign Message Section -->
        <section id="message-section" style="display: none;">
          <h2>Sign Message</h2>
          <form id="msg-form" class="msg-form">
            <div class="form-group">
              <label for="message">Message</label>
              <textarea
                id="message"
                placeholder="Enter message to sign..."
                rows="3"
                required
              ></textarea>
            </div>
            <button type="submit" class="btn-primary">Sign Message</button>
          </form>
          <div id="msg-result" class="result"></div>
        </section>

        <!-- Events Log -->
        <section id="events-section">
          <h2>Event Log</h2>
          <div id="events-log" class="events-log"></div>
          <button id="clear-log" class="btn-secondary">Clear Log</button>
        </section>
      </main>

      <footer>
        <p>Built with XRPL Connect - A framework-agnostic wallet toolkit</p>
      </footer>
    </div>

    <!-- XRPL Wallet Connector Web Component
         Features:
         - "Connect Wallet" button when disconnected
         - Shows account modal when connected (tap to manage account)
         - Click to open wallet selection modal
         - Fully customizable via CSS variables (see style.css for theming)
         - Add social-auth attribute to enable social login mode
    -->
    <xrpl-wallet-connector
      id="wallet-connector"
      social-auth
      style="
        --xrpl-background-color: #1a202c;
        --xrpl-background-secondary: #2d3748;
        --xrpl-background-tertiary: #4a5568;
        --xrpl-text-color: #F5F4E7;
        --xrpl-text-muted-color: rgba(245, 244, 231, 0.6);
        --xrpl-primary-color: #3b99fc;
        --xrpl-font-family: inherit;
        --xrpl-border-radius: 12px;
        --xrpl-modal-box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
      "
      primary-wallet="web3auth">
    </xrpl-wallet-connector>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>
